var N=typeof window!="undefined"?window:Et();function Et(){return{location:{},document:{documentElement:{style:{}},querySelector:()=>null,createElement:e=>{let t={tagName:e.toUpperCase(),setAttribute:(n,r)=>t.x=r,getAttribute:n=>t[n],style:{setProperty:()=>!0}};return e==="style"&&Object.assign(t,{sheet:{insertRule:(n,r)=>r?t.sheet.cssRules.splice(r,0,Fe(n)):t.sheet.cssRules.push(Fe(n)),cssRules:[]}}),t}}}}function Fe(e){return e+e.match(/\{/g).map(()=>"}").join("")}var be=nt,j=N.document,A=j&&j.querySelector&&(j.querySelector(".sin")||j.createElement("style")),J=A&&A.getAttribute("id")||"sin-"+("000000"+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6),Ce=j.createElement("div"),kt=/^(o|O|ms|MS|Ms|moz|Moz|webkit|Webkit|WebKit)([A-Z])/,He=e=>e.replace(/(\B[A-Z])/g,"-$1").toLowerCase(),Ue=e=>e?e.hasOwnProperty("width")?e:Ue(Object.getPrototypeOf(e)):{},$e=(e,t)=>(e[t.split("-").map(n=>n[0]).join("")]=t,e),Be={},Je={},Ee={},Xe=e=>Object.entries(e).forEach(([t,n])=>Je["@"+t]=n);nt.prefix=J;var se={flex:"","line-height":"",border:"px",transform:"px","box-shadow":"px","border-top":"px","border-left":"px","border-right":"px","border-bottom":"px","@media":"px"},ie=["float"].concat(Object.keys(j.documentElement?Ue(j.documentElement.style):{})).filter((e,t,n)=>e.indexOf("-")===-1&&e!=="length"&&n.indexOf(e)===t).map(e=>e.match(kt)?"-"+He(e):He(e)).sort(),ke=ie.reduce((e,t)=>{let n=t.match(/-(ms|o|webkit|moz)-/g);if(n){let r=t.replace(/-(ms|o|webkit|moz)-/,"");ie.indexOf(r)===-1&&(r==="flexDirection"&&(e.flex="-"+n[1].toLowerCase()+"-flex"),e[r]=t)}return e},{}),At=["align-items","bottom","background-color","border-radius","box-shadow","background-image","color","display","float","flex-direction","font-family","font-size","height","justify-content","left","line-height","letter-spacing","margin","margin-bottom","margin-left","margin-right","margin-top","opacity","padding","padding-bottom","padding-left","padding-right","padding-top","right","top","text-align","text-decoration","text-transform","width"],Ot=Object.assign(ie.reduce($e,{}),At.reduce($e,{})),Ae=new Map,pn=typeof N!="undefined"&&N.CSS&&CSS.supports("color","var(--support-test)"),Oe=e=>e!==32&&e!==9&&e!==10&&e!==13&&e!==59,Ze=e=>e>=48&&e<=57||e===46,Ne=e=>e===37||e>=65&&e<=90||e>=97&&e<=122,Nt=e=>e===34||e===39,Ge=e=>e===32||e===58||e===9,jt=e=>e===59||e===10||e===125,Qe=e=>e===58||e===64||e===38||e===91,je=e=>e[e.length-1],I=[],ae=[];var _=-1,y=-1,M=-1,X=-1,_e=-1,K=-1,c=-1,Ye=-1,W=-1,le=0,oe="",Me="",b="",w="&",F="",Z="",ue="",S="",Pe="",we="",G="",H="",f="",E="",ve="",k=null,xe=!0,ce=!1,Re=!1,Le=!0,Te=!1,et=-1;function Ve(e){return Ot[e]||e}function tt(e,t){return(ce?e:_t(e))+":"+t+";"}function _t(e){return Be[e]||(Be[e]=Lt(Ve(e)))}function Mt(e){return e.replace(/,\s*[:[]?/g,t=>Qe(t.charCodeAt(t.length-1))?",&"+je(t):",& ")}function fe(e,t){if(xe&&(A&&j.head&&j.head.appendChild(A),xe=!1),A&&A.sheet)try{A.sheet.insertRule(e,t??A.sheet.cssRules.length)}catch(n){console.error("Insert rule error:",n,e)}}function nt([e,...t],n,r=0,s){if(Ae.has(e))return{...Ae.get(e),args:t};let i={};we=G=H=S=E="",I.length=0,y=et=-1,k=s?{}:null,Te=!1,Re=!1,Le=!0,f=e[0];for(let a=0;a<e.length;a++)if(k?rt(0,a===e.length-1):Pt(e,a,t,n),f=e[a+1],a<t.length)if(y>=0){let o=e[a].slice(y);i[ve="--"+J+le+a]={unit:it(b,je(ae)),index:a},E+=o+"var("+ve+")",y=0}else t[a]&&(f+=t[a]+";",Le=!1);if(Te)if(s)Object.entries(k).forEach(([a,o])=>fe(a.replace(/&\s*/g,"")+"{"+o));else{oe=J+le++,H+=(H?" ":"")+oe,Me="";for(let a=0;a<r;a++)Me+="."+oe;Object.entries(k).forEach(([a,o])=>{fe(a.replace(/&/g,"."+oe+Me)+"{"+o)})}let l={name:we,classes:H,id:G,args:t,vars:i,parent:n};return Le&&Ae.set(e,l),l}function Pt(e,t,n,r){for(let s=0;s<=f.length;s++)if(c=f.charCodeAt(s),Re){if(Oe(c)){k={},rt(s++,t===e.length-1);break}}else!Oe(c)||s===f.length?(H=(M!==-1?f.slice(M+1,s).replace(/\./g," "):"")+H+(r?r.classes:""),G===""&&(G=(X!==-1?f.slice(X,M===-1?s:M):"")||(r?r.id:null)),we=f.slice(0,G?X-1:M!==-1?M:s)||r&&r.name,X=M=-1,Re=!0):c===35?X=s+1:M===-1&&c===46&&(M=s)}function wt(e){return Je[e]||e}function rt(e,t){for(let n=e;n<=f.length;n++)c=f.charCodeAt(n),K===-1&&y>=0&&(ce?c===59:jt(c)||t&&n===f.length)&&(W>-1&&!Ne(c)&&st(n),b==="@import"?fe(b+" "+f.slice(y,n),0):S+=tt(b,E+f.slice(y,n)),Te=!0,_=y=-1,ce=!1,b=E=""),K!==-1?K===c&&f.charCodeAt(n-1)!==92&&(K=-1):K===-1&&Nt(c)?(K=c,y===-1&&(y=n)):c===123?(b==="animation"?(S&&(k[w||"&"]=S),Z=E+f.slice(y,n).trim(),Pe=E="",S=""):Z?(ue=f.slice(_,n).trim(),S=""):(S&&(k[w||"&"]=S),F=_e===64?wt(b+E+f.slice(y,n).trim()):f.slice(_,n).trim(),F.indexOf(",")!==-1&&(F=Mt(F)),E=b="",I.push((Qe(_e)?"":" ")+(F==="@font-face"?Array(++et+1).join(" "):"")+F),w=I.toString(),S=k[w||"&"]||""),_=y=-1,b=""):c===125||t&&n===f.length?(ue?(Pe+=ue+"{"+S+"}",ue=S=""):Z?(fe("@keyframes "+J+ ++le+"{"+Pe+"}"),S=(k[w||"&"]||"")+tt("animation",Z+" "+J+le),Z=""):(S&&(k[w||"&"]=S),I.pop(),w=I.toString(),S=k[w||"&"]||""),_=y=-1,b=""):n!==f.length&&_===-1&&Oe(c)?(_=n,_e=c):!b&&_>=0&&Ge(c)?(b=f.slice(_,n),ce=c===58):y===-1&&b&&!Ge(c)?(y=n,Ze(c)&&(W=n)):y!==-1&&(Ze(c)?W===-1&&(W=n):W>-1&&st(n),c===40?ae.push(f.slice(Math.max(Ye,y),n)):c===41?ae.pop():(c===9||c===32)&&(Ye=n+1))}function st(e){Ne(c)||(E=E+f.slice(y,e)+it(b,je(ae)),y=e),W=-1}function Ie(e,t){return typeof e=="function"&&(e=E()),typeof e!="string"||Ne(e.charCodeAt(e.length-1))?e+t:e}function it(e,t=""){e=Ve(e);let n=e+","+t;return n in Ee?Ee[n]:Ee[n]=t&&(t.indexOf("translate")===0||"perspective blur drop-shadow inset polygon".indexOf(t)>-1)?"px":t.indexOf("rotate")===0||t.indexOf("skew")===0?"deg":t?"":Rt(e)}I.toString=function(){let e="",t="";return I.forEach(n=>n.charCodeAt(0)===64&&n!=="@font-face"?e+=n:t+=n),(e?e+"{":"")+(t==="@font-face"?"":"&")+t};function Rt(e){if(e=Ve(e),e[0]==="-"&&e[1]==="-"||e in se)return se[e];try{return Ce.style[e]="1px",Ce.style.setProperty(e,"1px"),se[e]=Ce.style[e].slice(-3)==="1px"?"px":""}catch{return se[e]=""}}function Lt(e){if(ie.indexOf(e)===-1){if(ke[e])return console.log(e,"prefixed to",ke[e]),ke[e];e.indexOf("--")!==0&&console.log(e,"not found")}return e}var at=!1,he={};function Q(e){return String(e).replace(/\/+/g,"/").replace(/(.)\/$/,"$1")}function lt(e){return e.split(/(?=\/)/)}function Tt(e,t){return e.reduce((n,r,s)=>n+(r==="404"?1:r===t[s]?6:r&&t[s]&&r.toLowerCase()===t[s].toLowerCase()?5:r[1]===":"&&t[s]&&t[s].length>1?4:r==="/"&&!t[s]?3:r==="*"||r==="/*"?2:-1/0),0)}function Vt(e,t){return e.reduce((n,r,s)=>(r[1]===":"&&(n[r.slice(2)]=decodeURIComponent(t[s].slice(1))),n),{})}function pe(e,t,n){let r=e(async({route:a,key:o,...h},[u],p)=>(typeof u=="string"&&(u=(await import(u)).default),h.route=a,()=>typeof u=="function"?u(h,[],{...p,route:a}):u));return Object.assign(l,n),l.toString=l,l.has=a=>a==="/"?s(l.url)===t||s(l.url)==="/"&&t==="":s(l.url).indexOf(Q(t+"/"+a))===0,Object.defineProperty(l,"current",{get(){let a=s(l.url),o=a.indexOf("/",t.length+1);return o===-1?a:a.slice(0,o)}}),l;function s(a,o=0){return(e.pathmode[0]==="#"?a.hash.slice(e.pathmode.length+o):e.pathmode[0]==="?"?a.search.slice(e.pathmode.length+o):a.pathname.slice(e.pathmode+o)).replace(/(.)\/$/,"$1")}function i(a,o={}){e.pathmode[0]==="#"?window.location.hash=e.pathmode+a:e.pathmode[0]==="?"?window.location.search=e.pathmode+a:window.history[o.replace?"replaceState":"pushState"](o.state,null,e.pathmode+a),he[a]=o.state,e.redraw()}function l(a,o={}){if(typeof a=="undefined")return t+"/";if(typeof a=="string")return i(Q(a[0]==="/"?a:"/"+a),o);at||(at=!0,e.pathmode[0]==="#"?window.addEventListener("hashchange",()=>e.redraw()):typeof window.history.pushState=="function"&&window.addEventListener("popstate",e.redraw));let h=s(l.url,t.length),u=lt(h),[p,O,g=o.notFound]=Object.entries(a).reduce((B,[D,Ct])=>{D=lt(Q(D));let We=Tt(D,u);return We>B[0]?[We,D,Ct]:B},[0]),C=t+(O&&O[0]!=="*"?O.map((B,D)=>u[D]).join(""):"");(g===void 0||o.notFound)&&l.notFound(!0);let $=pe(e,C.replace(/\/$/,""),n);return $.parent=l,r({key:C||"/",route:$,...t+h===C&&he[t+h]||{},...Vt(O||[],u)},g)}}var R=class{constructor(t,n=null,r=0,s={},i=null){this.level=r,this.component=t,this.tag=n,this.attrs=s,this.key="key"in s?s.key:null,this.dom=null,this.children=i}};["get","put","post","delete","patch"].forEach(e=>P[e]=function(t,n){return n.method=e,P(t,n)});P.redraw=()=>{};function P(e,{method:t="GET",redraw:n=!0,body:r=null,user:s=void 0,pass:i=void 0,headers:l={},config:a=p=>{},raw:o=!1,background:h=!1,extract:u=p=>p}={}){return new Promise((p,O)=>{let g=new XMLHttpRequest;g.onreadystatechange=function(){if(g.readyState===XMLHttpRequest.DONE){let C=g.responseText,$;if(!o)try{C=u?u(g):JSON.parse(g.responseText)}catch(B){$=B}($||g.status>=300?O:p)({status:g.status,body:C,xhr:g}),n&&!h&&P.redraw()}},g.onerror=g.onabort=C=>O({event:C,xhr:g}),g.open(t.toUpperCase(),e,!0,s,i),Object.keys(l).forEach(C=>l[C]&&g.setRequestHeader(C,l[C])),!("Content-Type"in l)&&g.setRequestHeader("Content-Type","application/json; charset=utf-8"),!("Accept"in l)&&g.setRequestHeader("Accept","application/json, text/*"),a(g),r===null?g.send():g.send(o?r:JSON.stringify(r))})}var ge=m;m.SKIP={};m.lift=zt;m.scan=It;m.merge=ot;m.combine=de;m.scanMerge=qt;m["fantasy-land/of"]=m;function m(e){let t=[],n=[];function r(l){return arguments.length&&l!==m.SKIP&&(e=l,ut(r)&&(r._changing(),r._state="active",t.forEach((a,o)=>a(n[o](e))))),e}r.constructor=m,r._state=arguments.length&&e!==m.SKIP?"active":"pending",r._parents=[],r._changing=()=>{ut(r)&&(r._state="changing"),t.forEach(l=>l._changing())},r._map=(l,a)=>{let o=a?m():m(l(e));return o._parents.push(r),t.push(o),n.push(l),o},r.map=l=>r._map(l,r._state!=="active");let s;function i(){return s=m(),s.map(l=>(l===!0&&(r._parents.forEach(a=>a._unregisterChild(r)),r._state="ended",r._parents.length=t.length=n.length=0),l)),s}return r.toJSON=()=>e!=null&&typeof e.toJSON=="function"?e.toJSON():e,r.toString=r,r.valueOf=r,r["fantasy-land/map"]=r.map,r["fantasy-land/ap"]=l=>de((a,o)=>a()(o()),[l,r]),r._unregisterChild=l=>{let a=t.indexOf(l);a!==-1&&(t.splice(a,1),n.splice(a,1))},Object.defineProperty(r,"end",{get:()=>s||i()}),r}function de(e,t){let n=t.every(a=>{if(a.constructor!==m)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return a._state==="active"}),r=n?m(e.apply(null,t.concat([t]))):m(),s=[],i=t.map(a=>a._map(o=>(s.push(a),(n||t.every(h=>h._state!=="pending"))&&(n=!0,r(e.apply(null,t.concat([s]))),s=[]),o),!0)),l=r.end.map(a=>{a===!0&&(i.forEach(o=>o.end(!0)),l.end(!0))});return r}function ot(e){return de(()=>e.map(t=>t()),e)}function It(e,t,n){let r=n.map(s=>{let i=e(t,s);return i!==m.SKIP&&(t=i),i});return r(t),r}function qt(e,t){let n=e.map(s=>s[0]),r=de(()=>{let s=arguments[arguments.length-1];return n.forEach((i,l)=>{s.indexOf(i)>-1&&(t=e[l][1](t,i()))}),t},n);return r(t),r}function zt(){let e=arguments[0],t=Array.prototype.slice.call(arguments,1);return ot(t).map(n=>e.apply(void 0,n))}function ut(e){return e._state==="pending"||e._state==="active"||e._state==="changing"}function ct(e){return e==="life"||e==="is"||e==="key"||e==="handleEvent"||e==="class"||e==="className"}function ft(e){return(ht(e.attrs.class)+ht(e.attrs.className)+e.tag.classes).trim()}function ht(e){return e?typeof e=="object"?Object.keys(e).reduce((t,n)=>t+e[n]?n+" ":"",""):e+" ":""}var L=N.document,Dt={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function d(...e){let t=typeof e[0];return t==="string"?qe(Object.assign([e[0]],{raw:[]}))(...e.slice(1)):qe.bind(t==="function"?new R(e[0]):gt(e))}function qe(...e){return e[0]&&Array.isArray(e[0].raw)?qe.bind(gt(e,this)):Ht(e,this)}var Y=new WeakMap,U=new WeakSet,ye=new WeakMap,T=new WeakMap,v=new WeakMap,q=new WeakMap,me=new WeakMap,pt=new Map,Kt=Promise.resolve(),ze=!0;d.pathmode="";d.redraw=x;d.mount=$t;d.stream=ge;d.css=(...e)=>be(e,null,0,!0);d.animate=Wt;d.value=Se;d.style=A;d.route=pe(d,"",{url:typeof N!="undefined"&&N.location,notFound:()=>{},title:()=>{},head:()=>{}});d.http=P;d.http.redraw=x;d.request=(e,t)=>(t?P(e,t):P(e.url,e)).then(({body:n})=>n).catch(n=>(n.response=n.body,Promise.reject(n)));d.bss={at:Xe,global:d.css};d.trust=e=>d(()=>{let t=L.createElement("div"),n=new DocumentFragment;for(t.innerHTML=e;t.lastChild;)n.appendChild(t.lastChild);return()=>n});function Wt(e){return e.setAttribute("animate","entry"),requestAnimationFrame(()=>e.removeAttribute("animate")),()=>(e.setAttribute("animate","exit"),new Promise(t=>e.addEventListener("transitionend",t)))}function Ft(e){e.addEventListener("click",t=>{if(!t.defaultPrevented&&(t.button===0||t.which===0||t.which===1)&&(!t.currentTarget.target||t.currentTarget.target==="_self")&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){t.preventDefault();let n=q.get(e).state;N.history.pushState(n,null,e.getAttribute("href")),he[e.getAttribute("href")]=n,d.redraw()}})}function gt(e,t){let n=t?t.level+1:0;return new R(t&&t.component,be(e,t&&t.tag,n),n)}function Ht(e,t){let n=Ut(e&&e[0]);return new R(t.component,t.tag,t?t.level+1:0,n?e.shift():{},e.length===1&&Array.isArray(e[0])?e[0]:e)}function Ut(e){return e&&typeof e=="object"&&!(e instanceof Date)&&!Array.isArray(e)&&!(e instanceof R)}function $t(e,t,n={},r={}){return typeof t!="function"&&(r=n||{},n=t||{},t=e,e=L.body),n.route=r.route=d.route,pt.set(e,{view:t,attrs:n,context:r}),ee(e,[].concat(t(n,[],r)),r),t}function x(){ze&&(Kt.then(Bt),ze=!1)}function Bt(){pt.forEach(({view:e,attrs:t,context:n},r)=>ee(r,[].concat(e(t,[],n)),n)),ze=!0}function ee(e,t,n,r,s=e.lastChild){let i=t[0]&&t[0].key!=null&&new Array(t.length),l=r?r.nextSibling:e.firstChild,a=me.has(l),o=s?s.nextSibling:null;i&&(i.rev={})&&a?Xt(e,n,me.get(l),t,i,o):Jt(e,n,t,i,l,o);let h=r?r.nextSibling:e.firstChild;return i&&(me.set(h,i),h!==l&&me.delete(l)),z(h,o&&o.previousSibling||e.lastChild)}function te(e,t,n,r){e[r]={dom:t,key:n},e.rev[n]=r}function Jt(e,t,n,r,s,i=null){let l=0,a,o;for(;l<n.length;)(s===null||!U.has(s))&&(o=n[l],a=s!==i?ne(s,o,t,e):ne(null,o,t),s===i&&e.insertBefore(a.dom,i),r&&te(r,a.first,o.key,l),s=a.last,l++),s!==null&&(s=s.nextSibling,s!==null&&s.nodeType===8&&s.nodeValue===","&&(s=V(s,e).after));for(;s&&s!==i;)s=V(s,e).after}function Xt(e,t,n,r,s,i){let l=n.rev,a=n.length-1,o=r.length-1,h=n[a],u=r[o],p=-1;e:for(;;){for(;h.key===u.key;){if(i=re(h.dom,u,t,e).first,te(s,i,u.key,o),delete l[u.key],o===0)break e;if(a===0){u=r[--o];break}h=n[--a],u=r[--o]}if(u.key in l){if(p=l[u.key],p>o)p=re(n[p].dom,u,t,e),De(e,p,i),i=p.first,te(s,i,u.key,o);else if(p!==o)p=re(n[p].dom,u,t,e),De(e,p,i),i=p.first,te(s,i,u.key,o);else{h=n[--a];continue}if(delete l[u.key],o===0)break;u=r[--o]}else{if(p=re(null,u,t),De(e,p,i),i=p.first,te(s,i,u.key,o),o===0)break;u=r[--o]}}for(let O in l)V(n[l[O]].dom,e)}function De(e,{first:t,last:n},r){let s=t,i;do i=s,s=i.nextSibling;while(e.insertBefore(i,r)!==n)}function ne(e,t,n,r,s,i){return typeof t=="function"?t.constructor===ge?Zt(e,t,n,r):ne(e,t(),n,r,s,i):t instanceof R?re(e,t,n,r,s,i):Array.isArray(t)?Gt(e,t,n,r):t instanceof Node?z(t):Ke(e,t,r,i)}function re(e,t,n,r,s,i){return t.component?tn(e,t,n,r,s,i):Qt(e,t,n,r,i)}function Zt(e,t,n,r){if(ye.has(e))return ye.get(e);let s,i;return t.map(l=>{s=ne(e,l,n,r),i=T.has(s)?T.get(s).dom:s,e!==i&&(e&&ye.delete(e),ye.set(i,s)),e=i}),z(s)}function z(e,t=e,n=t){return{dom:e,first:t,last:n}}function Gt(e,t,n,r){let s=T.has(e)?T.get(e):e,i=Ke(e,"["+t.length,r,!1,8);if(r){let l=s?s.nextSibling:null;ee(r,t,n,i.first,s);let a=l?l.previousSibling:r.lastChild;return s!==a&&T.set(i.first,a),z(i.dom,i.first,a)}return r=new DocumentFragment,r.appendChild(i.dom),ee(r,t,n,i.first,s),T.set(i.first,r.lastChild),z(r,i.first,r.lastChild)}function Ke(e,t,n,r,s=typeof t=="boolean"||t==null?8:3){let i=r||!e||e.nodeType!==s;return i&&bt(e,e=s===8?L.createComment(t):L.createTextNode(t),n),!i&&e.nodeValue!==""+t&&(e.nodeValue=t),z(e)}function Qt(e,t,n,r,s=e===null||Yt(e,t)){let i=n.NS;s&&bt(e,e=vt(t,n),r);let l=sn(e,t,n,s);return t.attrs.domSize=t.children&&t.children.length,t.attrs.domSize?ee(e,t.children,n):l&&l.domSize&&e.hasChildNodes()&&xt(e.firstChild,e),n.NS=i,z(e)}function Yt(e,t){return e.tagName!==(t.tag.name||"DIV").toUpperCase()}function vt(e,t){let n=e.attrs.is;return t.NS||(t.NS=e.attrs.xmlns||Dt[e.tag.name])?n?L.createElementNS(t.NS,e.tag.name,{is:n}):L.createElementNS(t.NS,e.tag.name):n?L.createElement(e.tag.name||"DIV",{is:n}):L.createElement(e.tag.name||"DIV")}function xt(e,t){do e=V(e,t).after;while(e)}function en(e,t){let n=[];e.attrs.life=l=>Array.isArray(l)?n.push(...l):n.push(l);let r=[],s=0,i=0;return{life:n,get exhausted(){return s>=r.length},get key(){return s<r.length?r[s].key:null},next(l){return arguments.length&&(r.length=s,r[s]={key:null,instance:l}),s<r.length&&r[i=s++]},pop(){return--s==0&&(r.length=i+1,!(i=0))}}}function tn(e,t,n,r,s=Y.has(e)?Y.get(e):en(t,n),i=s.exhausted||s.key!==t.key){let l=i?s.next(t.component(t.attrs,t.children,n)):s.next(),a=l.instance&&typeof l.instance.then=="function";t.key&&(l.key=t.key);let o;a?(o=Ke(e,"pending",r,!1,8),i&&l.instance.catch(u=>(console.error(u),u)).then(u=>{!Y.has(o.first)||(l.instance=u,x())})):o=ne(e,nn(typeof l.instance=="function"?l.instance(t.attrs,t.children,n):i?l.instance:t.component(t.attrs,t.children,n),t),n,r,s,i||void 0);let h=e!==o.first;return s.pop()&&(h||i)&&(h&&Y.delete(e),Y.set(o.first,s),!a&&yt(o.first,t.attrs,t.children,n,s.life)),o}function nn(e,t){return t?.tag?e?.tag?(e.tag={id:t.tag.id||e.tag.id,name:t.tag.name||e.tag.name,classes:(e.tag.classes?e.tag.classes+" ":"")+t.tag.classes,args:t.tag.args,vars:t.tag.vars,parent:e.tag},e):(e.tag=t.tag,e):e}function rn(e){for(let t in e)return!1;return!0}function sn(e,t,n,r){let s=!1,i=t.tag,l,a=!r&&q.has(e)?q.get(e):void 0;a&&t.attrs&&(t.attrs.handleEvent=a.handleEvent),!("id"in t.attrs)&&t.tag.id&&(t.attrs.id=t.tag.id),(r&&t.tag.classes||t.attrs.class!==(a&&a.class)||t.attrs.className!==(a&&a.className))&&(e.className=ft(t));for(l in t.attrs)!ct(l)&&(!a||a[l]!==t.attrs[l])&&(!s&&(s=!0),an(e,n,t.attrs,l,a&&a[l],t.attrs[l]));if(a)for(let o in a)o in t.attrs||(mt(o)?St(e,q,o):e.removeAttribute(o));if(t.tag)for(dt(e,t.tag.vars,t.tag.args,r);i=i.parent;)dt(e,i.vars,i.args,r);return r&&t.attrs.life&&yt(e,t.attrs,t.children,n,t.attrs.life),s?q.set(e,t.attrs):a&&rn(t.attrs)&&q.delete(e),a}function dt(e,t,n,r){for(let s in t){let{unit:i,index:l}=t[s],a=n[l];a&&a.constructor===ge?r&&a.map(o=>e.style.setProperty(s,Ie(o,i))):e.style.setProperty(s,Ie(a,i))}}function yt(e,t,n,r,s){s=[].concat(s).map(i=>typeof i=="function"&&i(e,t,n,r)).filter(i=>typeof i=="function"),s.length&&v.set(e,(v.get(e)||[]).concat(s))}function an(e,t,n,r,s,i){if(s===i)return;r==="href"&&i&&!i.match(/^([a-z]+:)?\/\//)&&(i=d.pathmode+Q(i),Ft(e));let l=mt(r);l&&typeof s==typeof i||(l?i?ln(e,n,r):St(e,n,r):!i&&i!==0?e.removeAttribute(r):!t.NS&&r in e&&typeof i!="boolean"?e[r]=i:e.setAttribute(r,i===!0?"":i))}function mt(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110}function St(e,t,n){e.removeEventListener(n.slice(2),t.handleEvent)}function ln(e,t,n){!t.handleEvent&&(t.handleEvent=on(e)),e.addEventListener(n.slice(2),t.handleEvent)}function on(e){return{handleEvent:function(t){let n=q.get(e)["on"+t.type],r=typeof n=="function"?n.call(t.currentTarget,t):n&&typeof n.handleEvent=="function"&&n.handleEvent(t);t.redraw!==!1&&x(),r&&typeof r.then=="function"&&r.then(x)}}}function bt(e,t,n){if(!!n)return e&&(n.insertBefore(t,e),V(e,n)),t}function un(e,t,n){if(!v.has(e))return n.length&&(U.add(e),Promise.allSettled(n));let r=v.get(e).map(s=>s()).filter(s=>s&&typeof s.then=="function");return v.delete(e),r.length===0?n.length&&(U.add(e),Promise.allSettled(n)):(U.add(e),Promise.allSettled(r.concat(n)).then(()=>{U.delete(e),V(e,t)}))}function cn(e,t,n){if(!T.has(e))return e.nextSibling;let r=T.get(e);if(e===r)return e.nextSibling;let s=r.nextSibling;e=e.nextSibling;do{let i=V(e,t,!1);i.life&&n.push(i.life),e=i.after}while(e&&e!==s);return s}function V(e,t,n=!0){if(!t||U.has(e))return{after:e.nextSibling,life:null};let r=[],s=e.nextSibling;if(e.nodeType===8&&(s=cn(e,t,r)),e.nodeType!==1)return n&&t.removeChild(e),{after:s,life:null};let i=e.firstChild;for(;i!==null;){let a=V(i,e,!1).life;a&&r.push(a),i=i.nextSibling}let l=un(e,t,r);return n&&!l&&t.removeChild(e),{after:s,life:l}}function Se(e,t){let n=new Set;return Se.valueOf=()=>e,Se.stringOf=()=>e,typeof t=="function"&&n.add(t),function(i){return typeof i=="function"?r(i):(arguments.length===0||(e=i,n.forEach(s)),e)};function r(i){let l=Se(e);return n.add(a=>l(i(a))),l}function s(i){i(e)}}export{d as default};
